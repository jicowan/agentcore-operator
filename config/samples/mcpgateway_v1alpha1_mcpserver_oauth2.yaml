apiVersion: mcpgateway.bedrock.aws/v1alpha1
kind: MCPServer
metadata:
  name: mcpserver-oauth2-sample
  labels:
    app.kubernetes.io/name: mcp-gateway-operator
    app.kubernetes.io/managed-by: kustomize
spec:
  # HTTPS endpoint of the MCP server (required)
  endpoint: https://mcp-server-oauth.example.com

  # Server capabilities - must include "tools" (required)
  capabilities:
    - tools

  # Authentication type: OAuth2 (required for MCP servers)
  # Note: MCP server targets only support OAuth2 authentication
  authType: OAuth2

  # OAuth provider ARN (required)
  # This should be the ARN of an OAuth2 credential provider created in Bedrock AgentCore
  # Example: arn:aws:bedrock-agentcore:us-west-2:123456789012:token-vault/default/oauth2credentialprovider/my-provider
  oauthProviderArn: arn:aws:bedrock-agentcore:us-east-1:123456789012:token-vault/default/oauth2credentialprovider/my-oauth-provider

  # OAuth scopes (optional)
  # Specify the OAuth scopes required by your MCP server
  oauthScopes:
    - read
    - write

  # Optional: Description for the gateway target
  description: "MCP server with OAuth2 authentication"

  # Optional: Custom target name (defaults to resource name)
  # targetName: my-oauth-target

  # Optional: Gateway ID (defaults to GATEWAY_ID environment variable)
  # gatewayId: gateway-abc123
